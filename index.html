<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Rarity Roll Revamp</title>
  <style>
    body {
      background-color: #bababa;
      font-family: Arial, sans-serif;
      padding: 2em;
    }

    #tghd {
      display: inline-block;
      margin-top: 1em;
      width: 50px;
      height: 50px;
      transition: filter 0.3s ease;
    }

    #result, #currency, #message {
      margin-bottom: 1em;
    }

    #message {
      padding: 10px;
      background: #f0f0f0;
      border: 1px solid #ccc;
      font-weight: bold;
    }

    .cutscene {
      position: fixed;
      top: 0; left: 0;
      width: 100%;
      height: 100vh;
      background: black;
      color: white;
      display: flex;
      justify-content: center;
      align-items: center;
      font-family: 'Georgia', serif;
      font-size: 2em;
      text-shadow: 0px 0px 5px #ff5ec7;
      text-align: center;
      z-index: 9999;
    }

    .cutscene.hidden {
      display: none;
    }

    @keyframes blink {
      0%, 100% { border-color: transparent; }
      50% { border-color: white; }
    }

    #cutscene-text::after {
      content: "";
      display: inline-block;
      width: 10px;
      height: 1em;
      border-right: 2px solid white;
      animation: blink 1s step-end infinite;
    }
  </style>
</head>
<body>
  <div id="currency">
    Shocks: <span id="shocks">100</span><br>
    Luck: <span id="luck-display">1</span>
  </div>

  <button onclick="roll()">Roll!</button>
  <button onclick="buyItem('x2')">Buy x2 Luck Potion (+1 luck, 40 shocks)</button>
  <button onclick="buyItem('null')">Buy Null Potion (+40 luck, 100 shocks)</button>
  <button onclick="buyItem('lucky')">Buy Super Potion (+5 luck, 25 shocks)</button>
  <button onclick="buyItem('godly')">Buy Godly Potion (+500 luck, 1000 shocks)</button>
  <button onclick="buyItem('luckshot')">Buy Luckshot Potion (+10000 luck, 5000 shocks & 1500 luck)</button>
  <button id="toggle-cutscenes-btn" onclick="toggleCutscenes()">Disable Cutscenes</button>

  <div id="message">Welcome! Roll to begin.</div>
  <div id="result">Press "Roll!" to try your luck.</div>
  <img id="tghd" src="theglorioushotdog.png">

  <div class="cutscene hidden" id="cutscene">
    <div id="cutscene-text"></div>
  </div>

  <script>
    let iscutscene = false;
    let cutscenesEnabled = true;
    let shocks = 100;
    let baseLuck = 1;
    let activeBoosts = [];

    const rarities = [/* your full rarity list remains here */];

    function getLuck() {
      return baseLuck + activeBoosts.reduce((acc, b) => acc + b.amount, 0);
    }

    function updateUI() {
      document.getElementById("shocks").textContent = shocks;
      document.getElementById("luck-display").textContent = getLuck();
    }

    function displayMessage(msg) {
      const msgEl = document.getElementById("message");
      msgEl.textContent = msg;
    }

    setInterval(() => {
      const now = Date.now();
      activeBoosts = activeBoosts.filter(boost => boost.expiresAt > now);
      updateUI();
    }, 1000);

    function buyItem(type) {
      const currentLuck = getLuck();

      if (type === "x2" && shocks >= 40) {
        shocks -= 40;
        activeBoosts.push({ amount: 1, expiresAt: Date.now() + 600000 });
        displayMessage("x2 Luck Potion used!");
      } else if (type === "null" && shocks >= 100) {
        shocks -= 100;
        activeBoosts.push({ amount: 40, expiresAt: Date.now() + 600000 });
        displayMessage("Null Potion activated!");
      } else if (type === "lucky" && shocks >= 25) {
        shocks -= 25;
        activeBoosts.push({ amount: 5, expiresAt: Date.now() + 600000 });
        displayMessage("Super Potion activated!");
      } else if (type === "godly" && shocks >= 1000) {
        shocks -= 1000;
        activeBoosts.push({ amount: 500, expiresAt: Date.now() + 600000 });
        displayMessage("Godly Potion unleashed!");
      } else if (type === "luckshot") {
        if (shocks >= 5000 && currentLuck >= 1500) {
          shocks -= 5000;
          activeBoosts.push({ amount: 10000, expiresAt: Date.now() + 600000 });
          displayMessage("Luckshot Potion activated! Massive luck boost!");
        } else {
          displayMessage("Not enough shocks or luck for Luckshot Potion.");
        }
      } else {
        displayMessage("Not enough shocks!");
      }

      updateUI();
    }

    function roll() {
      if (iscutscene) return;

      const resultEl = document.getElementById("result");
      const tghd = document.getElementById("tghd");
      resultEl.className = "";

      for (let r of rarities) {
        if (Math.random() < r.chance * getLuck()) {
          shocks += r.shocks;

          if (r.name === "lucky") {
            startCutscene("You just got lucky...");
          } else if (r.name === "glow - extreme") {
            startCutscene("...");
          }

          const oneIn = Math.round(1 / r.chance).toLocaleString();
          resultEl.innerHTML = `You got a <span style="color:${r.color}; font-weight:bold;">${r.name.toUpperCase()}</span> with a chance of 1 in ${oneIn}. You earned <b>${r.shocks} shocks</b>!`;
          updateUI();
          return;
        }
      }

      resultEl.innerHTML = `You got a <span style="color:#888888; font-weight:bold;">COMMON</span> with a chance of 1 in 2.`;
      updateUI();
    }

    function startCutscene(text) {
      if (!cutscenesEnabled) return;

      const el = document.getElementById("cutscene");
      const textEl = document.getElementById("cutscene-text");
      textEl.textContent = text;
      el.classList.remove("hidden");
      iscutscene = true;
      setTimeout(() => {
        el.classList.add("hidden");
        iscutscene = false;
      }, 3000);
    }

    function toggleCutscenes() {
      cutscenesEnabled = !cutscenesEnabled;
      const btn = document.getElementById("toggle-cutscenes-btn");

      if (cutscenesEnabled) {
        btn.textContent = "Disable Cutscenes";
        displayMessage("Cutscenes have been enabled.");
      } else {
        btn.textContent = "Enable Cutscenes";
        displayMessage("Cutscenes have been disabled.");
      }
    }
  </script>
</body>
</html>
